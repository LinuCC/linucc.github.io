{"componentChunkName":"component---src-templates-blog-post-js","path":"/docker-arch-rpi2/","result":{"data":{"site":{"siteMetadata":{"title":"LinuCC's Blog"}},"markdownRemark":{"id":"b96e5730-8ec9-513e-b6d0-88707494a1ae","excerpt":"The new and faster Raspberry Pi 2 finally allows more sophisticated usage of services for home media and networking.\nCombine that with the superfast Docker for…","html":"<p>The new and faster Raspberry Pi 2 finally allows more sophisticated usage of services for home media and networking.\nCombine that with the superfast <a href=\"https://www.docker.com/\">Docker</a> for better service management and <a href=\"https://consul.io/\">Consul</a> for health checks and you get an awesome system that is really fun to play with (and possibly a bit overkill ;) )!</p>\n<p>I have used the first version of the Raspberry Pi for many tasks.\nIt was a print-server with cups, a media-center with minidlna and shared files with samba.\nIt is small, configurable and power-saving.\nIt also has tons of documentation available online.\nThe major downside of the Raspberry Pi v1 is its limited ressources:\nIf I use two services at the same time, it gets really slow with a 700Mhz ARMv6 processor.\nGranted, with its 40€ price tag this is to be expected.\nNow along comes the shiny new Raspberry Pi v2.\nWith a quad-core 900Mhz and 1GB of RAM it should be much faster than its predecessor.\nThe new processor also features the ARMv7 processor generation, meaning more software will be compatible with the new Raspberry Pi.</p>\n<h2>Basic setup</h2>\n<h3>Arch Linux</h3>\n<p>Installing Arch Linux on the Raspberry Pi is pretty straightforward.\nJust follow the <a href=\"http://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2\">guide on archlinuxarm.org</a>.\nIf you have an older installation of Arch for the old Raspberry Pi, I recommend you create a fresh installation.\nThis way you dont need to use the armv6-packages (Possible dependency-hell) or upgrade them to armv7.</p>\n<h3>Docker</h3>\n<p>To install Docker, login to your Raspberry Pi with SSH and type <code class=\"language-text\">pacman -Syu docker</code> to update the system and install docker.<br>\nIf you are logged in with a different user than root, you need to add yourself to the docker-group with <code class=\"language-text\">gpasswd -a user docker</code> and switch to the group with <code class=\"language-text\">newgrp docker</code>.\nNote that the last command will only affect the current session.\nNow you only need to start docker <code class=\"language-text\">systemctl start docker</code> and optionally autostart it on boot with <code class=\"language-text\">systemctl enable docker</code>.\nCheck if docker is up and running with <code class=\"language-text\">docker info</code>.\nThats it!</p>\n<h2>Base image for Docker</h2>\n<p>Since the Raspberry Pi 2 uses a different architecture than the old Raspberry Pi, the kernel differs, too.\nThis means that we cannot use already existing, prepackaged docker-images for Arch Linux like the repository <a href=\"https://registry.hub.docker.com/u/cellofellow/rpi-arch/\">cellofellow/rpi-arch</a>.\nSince there is no base-image for Arch Linux on the Raspberry Pi 2 (I still struggle to create a working and small automatically building image), we have to create it ourselves.</p>\n<p>To do that, create a new directory on the Raspberry Pi to store the Dockerfile in.\nFetch the current Arch Linux archive with</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -L http://archlinuxarm.org/os/ArchLinuxARM-rpi-2-latest.tar.gz -o archlinux.tar.gz</code></pre></div>\n<p>Then create a new file named <code class=\"language-text\">Dockerfile</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM scratch\n\nADD archlinux.tar.gz /\n\nCMD [&quot;/bin/bash&quot;]</code></pre></div>\n<p>Running <code class=\"language-text\">docker build -t base-arch-rpi2 .</code> will extract the archive into the root of the new image named <code class=\"language-text\">base-arch-rpi2</code>.</p>\n<p>You can now start a container using the image with <code class=\"language-text\">docker run -ti base-arch-rpi2</code> or create children with <code class=\"language-text\">FROM base-arch-rpi2</code> in your Dockerfile.</p>","frontmatter":{"title":"Docker with Arch Linux and Raspberry Pi 2","date":"March 02, 2015","description":"A basic guide on how to use Docker with Arch Linux on a Raspberry Pi 2."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/docker-arch-rpi2/","previous":null,"next":{"fields":{"slug":"/doctrine-3way-many-to-many/"},"frontmatter":{"title":"Doctrine2 three-way many-to-many table result offset"}}}}}